# 병렬로봇 기반 식재료 이물 제거 자동화 시스템
한국공학대학교 캡스톤디자인 졸업작품  
활동기간: 2024.11 ~ 2025.08  

---

## 프로젝트 개요
**기관:** 한국공학대학교  
**역할:** 팀원 / SW(로봇 제어 담당)  
**수상:**  
- 2025 한국공학대전 시흥시장상  
- 2025 한국생산제조학회 추계학술대회 논문 우수발표상  

### 프로젝트 목표  
AI 세그멘테이션 및 병렬로봇 제어 기술을 결합한  
고속 자동화 이물 제거 시스템 개발

### 개인 목표  
병렬로봇의 기구학 및 제어 알고리즘을 직접 구현하여  
고속·고정밀 이물 제거 자동화 시스템 완성

---

## 시스템 구성
- **로봇 제어부:** STM32F429 기반 제어기로 역기구학 연산 및 RS485 통신 기반 3축 스텝모터 제어 수행  
- **비전 처리부:** 뎁스카메라로 식재료 위 이물 좌표 검출 후 로봇 좌표계로 변환  
- **컨베이어 제어부:** STM32F103 기반 엔코더 피드백 제어, GPIO 신호를 통해 로봇 제어부와 동기화  
- **공압 제어부:** 흡착 및 파기 동작 제어 (이물 픽업 및 배출)  
- **구동 시퀀스:**  
  이물 검출 → 좌표 데이터 전송 → 컨베이어 정지 → 로봇 픽업(ㄷ자 경로) → 드롭 → 컨베이어 재가동  
- **검증 환경:**  
  단위 시험(축별 구동 및 오차 측정) + 통합 시험(비전–로봇–컨베이어 연동 검증)

---

## 상세 내용

### 1. 역/정기구학 및 제어 알고리즘 설계
- 작업 범위를 고려하여 링크 길이 선정 후 순기구학·역기구학 모델 정식화  
- MATLAB 시뮬레이션을 통한 작업영역 검증 및 경로 타당성 분석  
- 역기구학 수식을 STM32CubeIDE C언어 코드로 구현, 입력 좌표를 각도·스텝 단위로 변환  
- 병렬로봇 충돌 방지를 위해 수직–수평–수직(ㄷ자 형태) 엔드이펙터 이동 경로 설계  

### 2. 모터 및 드라이버 제어
- 3축 스텝모터를 STM32F429에서 RS485 통신으로 제어 (EDB2000 드라이버 사용)  
- 명령 프레임 구조 및 응답 파싱 로직 직접 설계  
- 전원 인가 후 홈 위치 복귀 및 모터 완료 응답 기반의 상태 제어 구현  

### 3. 좌표 변환 및 동작 시퀀스 제어
- 비전 검출 좌표를 로봇 좌표계로 변환 (변환행렬 기반)  
- 픽업/드롭 포즈 정의 및 상태기계(State Machine) 기반 순차 동작 구조 설계  

### 4. 컨베이어 제어 및 동기화
- STM32F103 기반 엔코더 제어 및 속도 피드백으로 컨베이어 정지·재가동 구현  
- GPIO 신호를 통한 병렬로봇과의 안전한 타이밍 동기화  
- 로봇 사이클(픽→상승→이동→드롭)과 컨베이어 사이클을 병렬로 동작하도록 연동  

### 5. 시험 및 검증
- 단위 시험: 각 축 구동 정확도, 홈 위치 오차 측정  
- 통합 시험: 비전–로봇–컨베이어 간 통신 및 좌표 일치 검증  
- 직접 제작한 좌표계 기반으로 목표 위치 정확도 확인  
- 실제 이물 위치로의 이동 및 제거 동작 성공적으로 수행  

---

## 프로젝트 성과
- AI 세그멘테이션과 병렬로봇 제어 기술을 통합한 실시간 자동 이물 제거 시스템 완성  
- 리모컨 기반 제어 구조를 BLE–GPIO 기반 자동 연동 구조로 전환  
- 다중 제어기(STM32F429, STM32F103) 간 실시간 동기화 제어 구현  
- MATLAB 기반 기구학 모델 검증 및 실제 제어기 이식 성공  
- 비전 좌표 → 로봇 좌표 자동 변환 및 ㄷ자 경로 기반 안정적 궤적 제어  
- ±1 mm 수준의 위치 정밀도 달성 (정량 오차 시험 결과)  
- 통합 시스템의 반복 동작 및 제어 신뢰성 확보  
- **수상 실적:**  
  - 2025 한국공학대전 시흥시장상  
  - 2025 한국생산제조학회 추계학술대회 논문 우수발표상  

---

## 사용 기술
**하드웨어:** STM32F429, STM32F103, RS485 통신, 3축 스텝모터(EDB2000), 뎁스카메라(Intel RealSense D455), 진공 이젝터 및 패드  
**소프트웨어:** STM32CubeIDE (C), MATLAB (시뮬레이션), Python (YOLO 세그멘테이션, OpenCV)  
**제어 알고리즘:** 순·역기구학, ㄷ자형 경로 제어, 상태기계 기반 사이클 제어  
**통신:** RS485, UART, GPIO 동기화  

---

## 키워드
병렬로봇 · 역기구학 · STM32 · RS485 · 비전기반 로봇제어 · YOLO 세그멘테이션 · 실시간 제어 · 자동화 시스템  
